From b983be3b8bb0d53eb8e262431673363d0d1c46d4 Mon Sep 17 00:00:00 2001
From: Valentin Raevsky <valentin@compulab.co.il>
Date: Mon, 22 Nov 2021 12:59:27 +0200
Subject: [PATCH] som-imx8m-plus: dts: Enable pm support on usdhc1

Signed-off-by: Valentin Raevsky <valentin@compulab.co.il>
---
 arch/arm64/boot/dts/compulab/som-imx8m-plus.dts | 13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)

diff --git a/arch/arm64/boot/dts/compulab/som-imx8m-plus.dts b/arch/arm64/boot/dts/compulab/som-imx8m-plus.dts
index 5ad527a507ec..6bad0acbe91c 100644
--- a/arch/arm64/boot/dts/compulab/som-imx8m-plus.dts
+++ b/arch/arm64/boot/dts/compulab/som-imx8m-plus.dts
@@ -777,8 +777,10 @@
 	pinctrl-1 = <&pinctrl_usdhc1_100mhz>, <&pinctrl_usdhc1_gpio>;
 	pinctrl-2 = <&pinctrl_usdhc1_200mhz>, <&pinctrl_usdhc1_gpio>;
 	vmmc-supply = <&reg_usdhc1_vmmc>;
+	cap-power-off-card;
+	keep-power-in-suspend;
 	non-removable;
-        no-1-8-v;
+	no-1-8-v;
 	bus-width = <4>;
 	status = "okay";
 
@@ -1093,16 +1095,13 @@
 		>;
 	};
 
-	pinctrl_wifi: wifigrp {
-		fsl,pins = <
-			MX8MP_IOMUXC_GPIO1_IO00__GPIO1_IO00	0x19
-		>;
-	};
-
 	pinctrl_usdhc1_gpio: usdhc1grp-gpio {
 		fsl,pins = <
+			/* WLAN_PD/marvell_PDn */
 			MX8MP_IOMUXC_GPIO1_IO00__GPIO1_IO00	0x19
+			/* WAKE_WLAN_IN/marvell_GPIO27 */
 			MX8MP_IOMUXC_GPIO1_IO01__GPIO1_IO01	0x19
+			/* WAKE_WLAN_OUT/marvell_GPIO14 */
 			MX8MP_IOMUXC_GPIO1_IO13__GPIO1_IO13	0x19
 		>;
 	};
-- 
2.17.1

